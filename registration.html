<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register for Free Lean-Agile App | Command Results</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="registration_styles.css"/>
  <link rel="manifest" href="/manifest.json"/>
  <meta name="theme-color" content="#667eea"/>
  <style>
    /* Minimal modal styles (kept here to avoid dependency) */
    .cr-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;}
    .cr-modal[aria-hidden="false"]{display:flex;}
    .cr-modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);}
    .cr-modal__dialog{position:relative;background:#fff;border-radius:16px;max-width:720px;width:92%;padding:24px;box-shadow:0 10px 40px rgba(0,0,0,.25);}
    .cr-modal__title{margin-top:0;margin-bottom:8px;font-size:1.4rem}
    .cr-modal__close{position:absolute;top:8px;right:12px;font-size:28px;background:transparent;border:0;cursor:pointer;line-height:1}
    .install-steps{display:grid;grid-template-columns:1fr;gap:12px}
    .install-steps h4{margin:.25rem 0}
    .install-hint{margin-top:.5rem;color:#555}
    .install-actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:.5rem;border-radius:10px;border:0;padding:.6rem 1rem;background:#667eea;color:#fff;cursor:pointer}
    .btn.btn-secondary{background:#475569}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    @media (min-width: 720px){
      .install-steps{grid-template-columns:repeat(3,1fr)}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-container">
        <div class="logo">
          <a href="index.html" aria-label="Go to homepage">
            <img src="https://www.commandresults.com/wp-content/uploads/2025/04/command-results-small-logo-200px-x-50px.png" alt="Command Results Logo"/>
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Registration Form -->
  <div class="registration-container">
    <div class="registration-card">
      <div class="registration-header">
        <h1>Register for Free Access</h1>
        <p>Get instant access to all our apps</p>
        <!-- Install help trigger (always visible, not tied to success) -->
        <p style="margin:.5rem 0 1rem">
          Having trouble installing?
          <button type="button" id="openInstallHelpModal" class="btn btn-secondary">
            <i class="fas fa-question-circle"></i> How to install
          </button>
        </p>
      </div>

      <form id="registrationForm" class="registration-form" novalidate>
        <div class="form-group">
          <label for="name" class="required">Full Name</label>
          <input type="text" id="name" name="name" required autocomplete="name"/>
        </div>
      
        <div class="form-group">
          <label for="email" class="required">Email Address</label>
          <input type="email" id="email" name="email" required autocomplete="email"/>
        </div>
      
        <div class="form-group">
          <label for="company" class="required">Company</label>
          <input type="text" id="company" name="company" required autocomplete="organization"/>
        </div>
      
        <div class="form-group">
          <label for="phone" class="required">Phone</label>
          <input type="tel" id="phone" name="phone" required autocomplete="tel"/>
        </div>
      
        <!-- ✅ New password field -->
        <div class="form-group">
          <label for="password" class="required">Password</label>
          <input type="password" id="password" name="password" required autocomplete="new-password"/>
        </div>
      
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-lock"></i> Access App
        </button>
      
        <!-- Loader that matches registration.js & CSS -->
        <div id="loader" class="loader" aria-hidden="true"></div>
      </form>
      

      <p class="terms">
        By clicking "Access App", you agree to our
        <a href="#">Terms of Service</a> and
        <a href="#">Privacy Policy</a>.
      </p>

      <div class="app-preview">
        <div class="app-feature"><i class="fas fa-mobile-alt"></i>Mobile Access</div>
        <div class="app-feature"><i class="fas fa-certificate"></i>Free Certificate</div>
        <div class="app-feature"><i class="fas fa-graduation-cap"></i>Self-Paced Learning</div>
      </div>
    </div>

    <!-- Confirmation (unchanged; still used post-registration) -->
    <div class="confirmation-message" id="confirmationMessage" aria-live="polite" style="display:none;">
      <h2>Registration Successful!</h2>
      <p>Great! Next step: install the app on your device for fast access.</p>

      <div id="installPanel" style="margin-top:1rem; display:none;">
        <button id="installAppBtn" class="btn btn-primary">
          <i class="fas fa-download"></i> Install App
        </button>
        <p id="installHint" style="margin-top:0.5rem;"></p>
      </div>

      <div id="androidInstructions" style="display:none; margin-top:1rem;">
        <h3>Android (Chrome)</h3>
        <ol>
          <li>Tap the <strong>⋮</strong> menu in Chrome.</li>
          <li>Choose <strong>Install app</strong> (or <strong>Add to Home screen</strong>).</li>
          <li>Confirm to add it to your home screen.</li>
        </ol>
      </div>

      <div id="desktopInstructions" style="display:none; margin-top:1rem;">
        <h3>Desktop (Chrome / Edge)</h3>
        <ol>
          <li>Open this site in Chrome or Edge.</li>
          <li>Click the <strong>Install</strong> icon in the address bar (or the <strong>⋮</strong> menu &gt; <strong>Install app</strong>).</li>
          <li>Follow the prompt to install.</li>
        </ol>
      </div>

      <div id="iosInstructions" style="display:none; margin-top:1rem;">
        <h3>iOS (Safari)</h3>
        <ol>
          <li>Tap the <strong>Share</strong> icon in Safari.</li>
          <li>Choose <strong>Add to Home Screen</strong>.</li>
          <li>Tap <strong>Add</strong> to finish.</li>
        </ol>
      </div>

      <div class="redirect-notice" style="margin-top:1rem;">
        <i class="fas fa-info-circle"></i>
        Already installed? <a href="https://command-results.passion.io/app/products/285969" id="appLink">Open the app</a>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact Us</a>
      </div>
      <p class="copyright">&copy; 2025 Command Results. All rights reserved.</p>
    </div>
  </footer>

  <!-- Dedicated Install Help Modal (separate from success) -->
  <div id="installHelpModal" class="cr-modal" aria-hidden="true" role="dialog" aria-label="Install Help">
    <div class="cr-modal__backdrop" data-close-modal></div>
    <div class="cr-modal__dialog" role="document" aria-modal="true">
      <button class="cr-modal__close" id="installHelpClose" type="button" aria-label="Close">&times;</button>
      <h3 class="cr-modal__title"><i class="fas fa-download"></i> Install the App</h3>
      <p class="install-hint" id="helpHint"></p>
      <div class="install-actions">
        <button type="button" id="helpInstallBtn" class="btn">
          <i class="fas fa-download"></i> Install now
        </button>
        <button type="button" id="helpHowBtn" class="btn btn-secondary">
          <i class="fas fa-list"></i> Show steps for my device
        </button>
      </div>
      <div class="install-steps" style="margin-top:10px">
        <div id="helpIos" style="display:none">
          <h4>iOS (Safari)</h4>
          <ol>
            <li>Tap <strong>Share</strong>.</li>
            <li>Select <strong>Add to Home Screen</strong>.</li>
            <li>Tap <strong>Add</strong>, then open from your Home Screen.</li>
          </ol>
        </div>
        <div id="helpAndroid" style="display:none">
          <h4>Android (Chrome)</h4>
          <ol>
            <li>Tap <strong>⋮</strong> (Menu) in Chrome.</li>
            <li>Choose <strong>Install app</strong> or <strong>Add to Home screen</strong>.</li>
            <li>Confirm, then launch from your home screen.</li>
          </ol>
        </div>
        <div id="helpDesktop" style="display:none">
          <h4>Desktop (Chrome/Edge)</h4>
          <ol>
            <li>Click the <strong>Install</strong> icon in the address bar, or use <strong>⋮ → Install app</strong>.</li>
            <li>Accept prompts (pin, auto-start if desired).</li>
          </ol>
        </div>
      </div>
      <p id="helpBrowserNote" style="margin-top:8px;color:#9b1c1c;font-weight:600;"></p>
    </div>
  </div>

  <!-- Stable SW registration (no timestamp param; prevents refresh loops) -->
  <script>
    (function () {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js', { scope: '/' })
          .then(reg => console.log('[SW] registered for registration page', reg.scope))
          .catch(err => console.warn('[SW] registration failed', err));
      }
    })();
  </script>
  <script src="registration.js"></script>
</body>
</html>
